<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1920, height=1080">
    <title>TikHub - Top Gifter Overlay</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            width: 1920px; height: 1080px;
            overflow: hidden; background: transparent;
            font-family: 'Arial', sans-serif;
        }
        #top-container {
            position: absolute; top: 50px; right: 50px;
            width: 400px;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(10px);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
            border: 2px solid rgba(255, 215, 0, 0.3);
        }
        .top-header {
            font-size: 24px; font-weight: bold;
            color: #ffd700; text-align: center;
            margin-bottom: 20px;
            text-shadow: 0 2px 10px rgba(255, 215, 0, 0.5);
        }
        .top-gifter {
            display: flex; align-items: center;
            gap: 15px; padding: 15px;
            background: rgba(255, 215, 0, 0.1);
            border-radius: 10px; margin-bottom: 15px;
            border: 2px solid rgba(255, 215, 0, 0.3);
        }
        .rank {
            font-size: 32px; font-weight: bold;
            color: #ffd700; width: 40px;
            text-align: center;
        }
        .gifter-info {
            flex: 1;
        }
        .gifter-name {
            font-size: 20px; font-weight: bold;
            color: white; margin-bottom: 5px;
        }
        .gift-count {
            font-size: 16px; color: #aaa;
        }
        .gift-value {
            font-size: 18px; font-weight: bold;
            color: #ffd700;
        }
        #connection-status {
            position: fixed; top: 10px; right: 10px;
            padding: 8px 16px; background: rgba(0, 0, 0, 0.7);
            color: white; border-radius: 20px;
            font-size: 12px; font-family: monospace; z-index: 10000;
        }
        #connection-status.connected { background: rgba(0, 200, 0, 0.7); }
    </style>
</head>
<body>
    <div id="connection-status">Connecting...</div>
    <div id="top-container">
        <div class="top-header">üèÜ TOP GIFTERS</div>
        <div id="gifters-list"></div>
    </div>
    <script>
        const OVERLAY_SERVER_URL = 'wss://your-overlay-server.onrender.com';
        const WS_PATH = '/ws/top-gift';
        let ws = null;
        const statusEl = document.getElementById('connection-status');
        const giftersList = document.getElementById('gifters-list');
        function connect() {
            ws = new WebSocket(OVERLAY_SERVER_URL + WS_PATH);
            ws.onopen = () => {
                console.log('‚úÖ Connected'); statusEl.textContent = 'Connected';
                statusEl.className = 'connected';
            };
            ws.onmessage = (event) => {
                const data = JSON.parse(event.data);
                if (data.type === 'top-gift-update') {
                    updateTopGifters(data.gifts || []);
                } else if (data.type === 'initial-state' && data.state) {
                    updateTopGifters(data.state.gifts || []);
                }
            };
            ws.onclose = () => { setTimeout(connect, 3000); };
        }
        function updateTopGifters(gifts) {
            giftersList.innerHTML = '';
            gifts.slice(0, 5).forEach((gifter, index) => {
                const el = document.createElement('div');
                el.className = 'top-gifter';
                el.innerHTML = `
                    <div class="rank">${index === 0 ? 'ü•á' : index === 1 ? 'ü•à' : index === 2 ? 'ü•â' : index + 1}</div>
                    <div class="gifter-info">
                        <div class="gifter-name">${gifter.username || gifter.name}</div>
                        <div class="gift-count">${gifter.count || 0} gifts</div>
                        <div class="gift-value">üíé ${gifter.value || gifter.coins || 0}</div>
                    </div>
                `;
                giftersList.appendChild(el);
            });
        }
        connect();
        setTimeout(() => { if (statusEl.className === 'connected') statusEl.style.opacity = '0.3'; }, 5000);
    </script>
</body>
</html>

