<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1920, height=1080">
    <title>TikHub - Timer Overlay</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            width: 1920px; height: 1080px;
            overflow: hidden; background: transparent;
            font-family: 'Arial', sans-serif;
            display: flex; align-items: center; justify-content: center;
        }
        #timer-container {
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(10px);
            padding: 40px 80px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
            border: 3px solid rgba(255, 165, 0, 0.4);
        }
        #timer-display {
            font-size: 96px;
            font-weight: bold;
            color: #ffa500;
            text-align: center;
            font-family: 'Courier New', monospace;
            text-shadow: 0 4px 20px rgba(255, 165, 0, 0.6);
            letter-spacing: 10px;
        }
        #timer-display.warning { color: #ff4444; animation: pulse 1s infinite; }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        #connection-status {
            position: fixed; top: 10px; right: 10px;
            padding: 8px 16px; background: rgba(0, 0, 0, 0.7);
            color: white; border-radius: 20px;
            font-size: 12px; font-family: monospace; z-index: 10000;
        }
        #connection-status.connected { background: rgba(0, 200, 0, 0.7); }
    </style>
</head>
<body>
    <div id="connection-status">Connecting...</div>
    <div id="timer-container">
        <div id="timer-display">00:00</div>
    </div>
    <script>
        const OVERLAY_SERVER_URL = 'wss://your-overlay-server.onrender.com';
        const WS_PATH = '/ws/timer';
        let ws = null, remaining = 0, isRunning = false, interval = null;
        const statusEl = document.getElementById('connection-status');
        const timerDisplay = document.getElementById('timer-display');
        function connect() {
            ws = new WebSocket(OVERLAY_SERVER_URL + WS_PATH);
            ws.onopen = () => {
                console.log('âœ… Connected'); statusEl.textContent = 'Connected';
                statusEl.className = 'connected';
            };
            ws.onmessage = (event) => {
                const data = JSON.parse(event.data);
                if (data.type === 'timer-update') {
                    remaining = data.remaining || 0;
                    isRunning = data.isRunning || false;
                    updateTimer();
                    if (isRunning && !interval) {
                        interval = setInterval(tick, 1000);
                    } else if (!isRunning && interval) {
                        clearInterval(interval); interval = null;
                    }
                } else if (data.type === 'initial-state' && data.state) {
                    remaining = data.state.remaining || 0;
                    isRunning = data.state.isRunning || false;
                    updateTimer();
                }
            };
            ws.onclose = () => { setTimeout(connect, 3000); };
        }
        function tick() {
            if (remaining > 0) {
                remaining--;
                updateTimer();
            } else if (interval) {
                clearInterval(interval);
                interval = null;
            }
        }
        function updateTimer() {
            const minutes = Math.floor(remaining / 60);
            const seconds = remaining % 60;
            timerDisplay.textContent = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
            timerDisplay.className = remaining < 60 && remaining > 0 ? 'warning' : '';
        }
        connect();
        setTimeout(() => { if (statusEl.className === 'connected') statusEl.style.opacity = '0.3'; }, 5000);
    </script>
</body>
</html>

